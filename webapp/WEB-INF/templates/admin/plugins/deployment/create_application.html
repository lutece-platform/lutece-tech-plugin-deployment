<script src="js/plugins/deployment/selectbox.js" type="text/javascript"></script>
<script src="js/plugins/deployment/deployment.js" type="text/javascript"></script>

<div class="row" >

    <legend>#i18n{deployment.create_application.table_label}</legend>

	<#if error_message?has_content>
		${error_message}
		<a class="btn btn-primary btn-mini" href="jsp/admin/user/ModifyUser.jsp?id_user=${id_user}"  title="#i18n{deployment.create_application.action_modify_user_account}" >
         	<i class="icon-edit icon-white"></i> 
        </a>
	<#else>
		<script type="text/javascript">
		// empty component list and unselect category
		initComponants();
		var itemsMap = new Object();
		<#list category_list_site_map?keys as category_key>
			var itemList = new Array();
			<#assign listSite = category_list_site_map[category_key!]! /> 
			<#list listSite as site>
				var item = new Object();
				item["code"] = "${site.code}";
				item["name"] = "${site.name}";
				itemList.push(item);
			</#list>
			itemsMap["${category_key}"] = itemList;
		</#list>	
		</script>
		<form class="form-horizontal" method="post"  name="create_application" id="create_application" action="jsp/admin/plugins/deployment/DoCreateApplication.jsp">
	   	 <input type="hidden" id="plugin_name" name="plugin_name" value="deployment"/>
	        
	        <fieldset>
	
	            <div class="control-group">
	                <label class="control-label" for="code" >#i18n{deployment.create_application.label_code} * : </label> 
	                <div class="controls">
	                    <input type="text" id="code" name="code" size="10" maxlength="10" tabindex="1" />
	                </div>
	            </div>
	             
	             <div class="control-group">
	                <label class="control-label" for="name" >#i18n{deployment.create_application.label_name} * : </label> 
	                <div class="controls">	
	                    <input type="text" id="name" name="name" size="20" maxlength="20" tabindex="2" />
	                </div>
	            </div>
	            <div class="control-group">
	                <label class="control-label" for="name" >#i18n{deployment.create_application.label_webapp_name} * : </label> 
	                <div class="controls">	
	                    <input type="text" id="webapp_name" name="webapp_name" size="20" maxlength="20" tabindex="3" />
	                </div>
	            </div>
	
	           
	            <div class="control-group">
	                <label class="control-label" for="code_category" >#i18n{deployment.create_application.label_category}*:</label>
	                <div class="controls">
	                    <@comboWithParams name="code_category" default_value="all" items=category_list additionalParameters="onchange='refreshComponants();'" />
	          		</div>
	            </div>
	            
	            
	            <div class="control-group">
	                <label class="control-label" for="site" >#i18n{deployment.create_application.label_site}*:</label>
	                <div class="controls">
	            				<select name="site" id="site" ></select>
	            	</div>
	            </div>
	            
	            <div class="form-actions">
	                <button class="btn btn-primary" type="submit" >#i18n{deployment.create_application.button_create}</button>
	                <a class="btn" href="jsp/admin/plugins/deployment/ManageApplications.jsp?plugin_name=deployment"" title="#i18n{portal.util.labelCancel}">#i18n{portal.util.labelCancel}</a>
	            </div>
	
	        </fieldset>
	    </form>
	</#if>
</div>