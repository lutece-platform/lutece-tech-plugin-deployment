<script src="js/plugins/deployment/selectbox.js" type="text/javascript"></script>
<script src="js/plugins/deployment/deployment.js" type="text/javascript"></script>

<div class="row-fluid" >

    <legend>#i18n{deployment.form_init_deploy_application.table_label}</legend>

	<#if error_message?has_content>
		${error_message}
		<a class="btn btn-primary btn-mini" href="jsp/admin/user/ModifyUser.jsp?id_user=${id_user}"  title="#i18n{deployment.create_application.action_modify_user_account}" >
         	<i class="icon-edit icon-white"></i> 
        </a>
	<#else>
	<div class="row-fluid" >
		<fieldset>
			    <legend>Application</legend>
			
				<p><strong>#i18n{deployment.deploy_application_process.label_code}:</strong>${application.code}</p> 
				<p><strong>#i18n{deployment.deploy_application_process.label_name} :</strong>${application.name}</p> 
	     </fieldset> 	
	 </div>    
	<div class="row-fluid" >
	 
	   <#list environment_list as environment>
		  <fieldset>
			<legend>${environment.name}</legend>		  	
			  <fieldset>
					<legend>SERVEURS TOMCAT</legend>		
				      <#assign listServerApplicationInstance = server_instance_map_tomcat[environment.code!]! /> 
					    <table class="table table-striped table-condensed">
					        <thead>
					            <tr>
					            		
					   				<th>code</th>
					                <th>nom</th>
					                <th>etat</th>
					                <th>actions</th>
					             </tr>
					        </thead>
					        <tbody>
					
					            <#list listServerApplicationInstance as serverApplicationInstance>
										
								 <tr>
					                <td>${serverApplicationInstance.code}</td>
					                <td>${serverApplicationInstance.name}</td>
					                <td>    
					                	<#if serverApplicationInstance.status==1>
                       						<span class="label label-success"><i class="icon-ok-sign icon-white"></i> #i18n{portal.util.labelEnabled}</span>
                       					<#else>
                        					<span class="label label-important"><i class="icon-remove-sign icon-white"></i> #i18n{portal.util.labelDisabled}</span>
                        				</#if>
					                 <td> 
					              	 <#list serverApplicationInstance.listServerApplicationAction as action >  
									 	<#if (!action.status?exists)||(action.status?exists && serverApplicationInstance.status==action.status)>
									 		<a class="btn btn-primary btn-mini" href="jsp/admin/plugins/deployment/RunAction.jsp?code_action=${action.code}&code_server_application=${serverApplicationInstance.code}" title="${action.name}" >
                       							 <i class="${action.iconCssClass}"></i>
                   						 </a>	
									 	</#if>
									 		
									 	
									 	
									 								                	
					                		
					                  </#list>	
					                
					                </td>
					             </tr>				
					            </#list>
					        </tbody>
					   	 </table>
			</fieldset>		
			<fieldset>
				<legend> SERVEURS MYSQL</legend>	
				      <#assign listServerApplicationInstanceMysql = server_instance_map_mysql[environment.code!]! /> 
					    <table class="table table-striped table-condensed">
					        <thead>
					            <tr>
					            		
					   				<th>code</th>
					                <th>nom</th>
					                <th>etat</th>
					                <th>actions</th>
					             </tr>
					        </thead>
					        <tbody>
					
					            <#list listServerApplicationInstanceMysql as serverApplicationInstance>
										
								 <tr>
					                <td>${serverApplicationInstance.code}</td>
					                <td>${serverApplicationInstance.name}</td>
					                <td>    
					                	<#if serverApplicationInstance.status==1>
                       						<span class="label label-success"><i class="icon-ok-sign icon-white"></i> #i18n{portal.util.labelEnabled}</span>
                       					<#else>
                        					<span class="label label-important"><i class="icon-remove-sign icon-white"></i> #i18n{portal.util.labelDisabled}</span>
                        				</#if>
					                 <td> 
					              	 <#list serverApplicationInstance.listServerApplicationAction as action >  
									 	<#if (!action.status?exists)||(action.status?exists && serverApplicationInstance.status==action.status)>
									 		<a class="btn btn-primary btn-mini" href="jsp/admin/plugins/deployment/RunAction.jsp?code_action=${action.code}&code_server_application=${serverApplicationInstance.code}" title="${action.name}" >
                       							 <i class="${action.iconCssClass}"></i>
                   						 </a>	
									 	</#if>
									 		
									 	
									 	
									 								                	
					                		
					                  </#list>	
					                
					                </td>
					             </tr>								
					            </#list>
					        </tbody>
					   	 </table>
				 </fieldset>
				 <fieldset>
					<legend> SERVEURS HTTPD</legend>	   	 
			
				      <#assign listServerApplicationInstanceHttpd = server_instance_map_httpd[environment.code!]! /> 
					    <table class="table table-striped table-condensed">
					        <thead>
					            <tr>
					            		
					   				<th>code</th>
					                <th>nom</th>
					                <th>etat</th>
					                <th>actions</th>
					             </tr>
					        </thead>
					        <tbody>
					
					            <#list listServerApplicationInstanceHttpd as serverApplicationInstance>
										
								<tr>
					                <td>${serverApplicationInstance.code}</td>
					                <td>${serverApplicationInstance.name}</td>
					                <td>    
					                	<#if serverApplicationInstance.status==1>
                       						<span class="label label-success"><i class="icon-ok-sign icon-white"></i> #i18n{portal.util.labelEnabled}</span>
                       					<#else>
                        					<span class="label label-important"><i class="icon-remove-sign icon-white"></i> #i18n{portal.util.labelDisabled}</span>
                        				</#if>
					                 <td> 
					              	 <#list serverApplicationInstance.listServerApplicationAction as action >  
									 	<#if (!action.status?exists)||(action.status?exists && serverApplicationInstance.status==action.status)>
									 		<a class="btn btn-primary btn-mini" href="jsp/admin/plugins/deployment/RunAction.jsp?code_action=${action.code}&code_server_application=${serverApplicationInstance.code}" title="${action.name}" >
                       							 <i class="${action.iconCssClass}"></i>
                   						 </a>	
									 	</#if>
									 		
									 	
									 	
									 								                	
					                		
					                  </#list>	
					                
					                </td>
					             </tr>					
					            </#list>
					        </tbody>
					   	 </table>
					 </fieldset>  	 
			   	</fieldset>  
			   </#list>
		</div>	   
	</#if>
</div>